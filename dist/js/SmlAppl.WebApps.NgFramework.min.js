!function(){"use strict";angular.module("smlAppl.webApps.framework.controllers",[]),angular.module("smlAppl.webApps.framework.directives",[]),angular.module("smlAppl.webApps.framework.filters",[]),angular.module("smlAppl.webApps.framework.services",[]),angular.module("smlAppl.webApps.framework",["smlAppl.webApps.framework.controllers","smlAppl.webApps.framework.directives","smlAppl.webApps.framework.filters","smlAppl.webApps.framework.services","smlAppl.webApps.framework.filterTable","ngNotify"])}(),function(){"use strict";angular.module("smlAppl.webApps.framework.filterTable.controllers",[]),angular.module("smlAppl.webApps.framework.filterTable.directives",[]),angular.module("smlAppl.webApps.framework.filterTable",["smlAppl.webApps.framework.filterTable.controllers","smlAppl.webApps.framework.filterTable.directives"])}(),function(){"use strict";function a(){return{uriBaseViews:"wwwroot/Views/",uriFilterTableViews:"wwwroot/FilterTable/Views/",uriFwBaseApi:"apiFw/v01/"}}angular.module("smlAppl.webApps.framework").constant("appConfigFw",a())}(),angular.module("smlAppl.webApps.framework").run(["$templateCache",function(a){"use strict";a.put("wwwroot/Views/PopupDatepicker.tpl.html",'<div class="input-group">\r\n	<input type="text" id="datepicker" name="datepicker" class="form-control" uib-datepicker-popup="dd.MM.yyyy" ng-model="data" is-open="states.opened" min-date="minDate" max-date="maxDate" datepicker-options="dateOptions" ng-required="required" close-text="Close" />\r\n	<span class="input-group-btn">\r\n		<button type="button" class="btn btn-default" ng-click="openCal($event)"><i class="glyphicon glyphicon-calendar"></i></button>\r\n	</span>\r\n</div>')}]),function(){"use strict";angular.module("smlAppl.webApps.framework.directives").directive("displayEmployee",["HttpHandler","Employee",function(a,b){return{restrict:"E",require:"?ngModel",scope:{placeholder:"="},template:"<span ng-if='item.Id'>{{ item.FirstName }} {{ item.LastName }} ({{ item.Pid }})</span><span ng-if='!item.Id'>-</span>",link:function(c,d,e,f){var g=f;c.item={},g.$render=function(){var d=g.$viewValue;d&&"00000000-0000-0000-0000-000000000000"!==d&&b.getById(d).then(function(a){c.item=a},a.handleGetErrorWithNotify)}}}}])}(),function(){"use strict";angular.module("smlAppl.webApps.framework.directives").directive("elastic",["$timeout",function(a){return{restrict:"A",link:function(b,c){c[0].style.overflowY="hidden",b.initialHeight=30,b.initialHeight=b.initialHeight||c[0].style.height;var d=function(){c[0].style.height=b.initialHeight;var a=c[0].scrollHeight;0===a&&(a=30),c[0].style.height=""+a+"px"};c.on("input change",d),a(d,0)}}}])}(),function(){"use strict";angular.module("smlAppl.webApps.framework.directives").directive("popupDatepicker",["appConfigFw",function(a){return{restrict:"E",scope:{data:"=ngModel"},templateUrl:a.uriBaseViews+"PopupDatepicker.tpl.html",link:function(a,b,c){a.required=c["ng-required"],a.states={opened:!1,showValidation:!1},a.dateOptions={startingDay:1},a.openCal=function(b){a.states.opened=!0}}}}])}(),angular.module("smlAppl.webApps.framework.filterTable").run(["$templateCache",function(a){"use strict";a.put("wwwroot/FilterTable/Views/FilterTable.html",'<div ng-switch="filterTable.Status" class="filtertable-container">\r\n    <div class="row">\r\n        <div ng-switch-when="Loading" class="col-md-12" style="text-align: center;">\r\n            <span>Loading <img src="bower_components/SmlAppl-WebApps-NgFramework/dist/images/loader-horizontal.gif" /></span>\r\n        </div>\r\n        <div ng-switch-when="Error" class="col-md-12" style="text-align: center;">\r\n            <span>{{::Translations.FilterTable_Error_Getting_Data}}</span>\r\n        </div>\r\n\r\n    </div>\r\n    <div class="row" ng-switch-when="Structure">\r\n        <div class="col-md-12">\r\n            <div style="overflow: auto;">\r\n                <table class="table table-bordered table-condensed table-responsive table-striped table-hover filtertable-table">\r\n                    <thead class="filtertable-table-header">\r\n                        <tr>\r\n                            <th>\r\n                                <span type="button" class="btn btn-default btn-sm" ng-click="open()" ng-show="filterTable.CanCustomize"><span class="glyphicon glyphicon-cog"></span></span>\r\n                            </th>\r\n                            <th ng-repeat="col in filterTable.VisibleCols" style="padding-left: 10px; padding-right: 40px; vertical-align: middle; cursor: pointer;" ng-click="filterTable.UpdateOrderBy(col, $event)">\r\n                                <span class="pull-left">{{::col.Display}}</span>\r\n                                <span style="margin-right: -30px; opacity: 0.5;" class="pull-right {{col.OrderIndicator}}"></span>\r\n                            </th>\r\n                        </tr>\r\n                        <tr ng-repeat="headerRow in filterTable.HeaderRows">\r\n                            <th>\r\n                                <span ng-bind-html="::headerRow.Title"></span>\r\n                            </th>\r\n                            <th ng-repeat="col in filterTable.VisibleCols">\r\n                                <span ng-bind-html="headerRow.GetValue(col)"></span>\r\n                            </th>\r\n                        </tr>\r\n                        <tr ng-show="filterTable.SearchActive">\r\n                            <td>\r\n                                <span type="button" class="btn btn-default btn-sm" ng-click="filterTable.ClearFilter()"><span class="glyphicon glyphicon-remove"></span></span>\r\n                            </td>\r\n\r\n                            <td ng-repeat="col in filterTable.VisibleCols" ng-switch="col.FilterType">\r\n                                <div ng-switch-when="CustomHtml" title="{{col.CustomFilter.Tooltip}}" style="cursor: pointer; min-height: 28px;" ng-click="defineFilter(col)">\r\n                                    <span ng-bind-html="col.CustomFilter.InputHtml"></span>\r\n                                </div>\r\n                                <div class="input-group" ng-switch-when="Custom" title="{{col.CustomFilter.Tooltip}}" style="cursor: pointer; width: 1px;" ng-click="defineFilter(col)">\r\n                                    <input type="text" class="form-control" style="cursor: pointer; width: auto;" value="{{col.CustomFilter.Text}}" readonly="readonly" disabled="disabled" ng-model-options="ModelOptions" />\r\n                                    <span class="input-group-addon">...</span>\r\n                                </div>\r\n                                <select ng-switch-when="Select" class="select2" name="filterTable.TableFilter[col.Key]" ng-model="filterTable.TableFilter[col.Key]">\r\n                                    <option ng-repeat="item in col.GetDistincts(filterTable.ReduceSelects)">{{::item}}</option>\r\n                                </select>\r\n                                <input ng-switch-when="Input" type="text" name="filterTable.TableFilter[col.Key]" ng-model="filterTable.TableFilter[col.Key]" ng-model-options="ModelOptions"/>\r\n\r\n                            </td>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody class="filtertable-table-body" ng-if="filterTable.VisibleCols.length > 0">\r\n                        <tr ng-repeat="item in filterTable.DataDisplayed">\r\n                            <td class="text-center" ng-class="::{\'filtertable-cell-clickable\' : filterTable.ActionCol.HasClickAction}" ng-click="filterTable.ExecuteClickAction(filterTable.ActionCol, item)">\r\n                                <span ng-bind-html="::item[filterTable.ActionCol.Key]"></span>\r\n                            </td>\r\n                            <td ng-repeat="col in filterTable.VisibleCols" ng-class="::{\'filtertable-cell-clickable\' : col.HasClickAction}" ng-click="filterTable.ExecuteClickAction(col, item)">\r\n                                <span ng-bind-html="::item[col.Key]"></span>\r\n                            </td>\r\n                        </tr>\r\n                    </tbody>\r\n                    <tfoot class="filtertable-table-footer">\r\n                        <tr ng-if="filterTable.Loading">\r\n                            <td colspan="100%" class="none" style="text-align: center;">Loading <img src="bower_components/SmlAppl-WebApps-NgFramework/dist/images/loader-horizontal.gif" /></td>\r\n                        </tr>\r\n                        <tr ng-if="filterTable.ShowNoDataMsg">\r\n                            <td colspan="100%" class="warning" style="text-align: center;">\r\n                                {{::Translations.FilterTable_Error_No_Data}}\r\n                            </td>\r\n                        </tr>\r\n                        <tr ng-if="filterTable.ShowDataFilteredOutMsg">\r\n                            <td colspan="100%" class="warning" style="text-align: center;">\r\n                                {{::Translations.FilterTable_Error_Filter_No_Data}}\r\n                            </td>\r\n                        </tr>\r\n                        <tr ng-repeat="footerRow in filterTable.FooterRows">\r\n                            <th>\r\n                                <span ng-bind-html="::footerRow.Title"></span>\r\n                            </th>\r\n                            <th ng-repeat="col in filterTable.VisibleCols">\r\n                                <span ng-bind-html="footerRow.GetValue(col)"></span>\r\n                            </th>\r\n                        </tr>\r\n                    </tfoot>\r\n                </table>\r\n            </div>\r\n            <div class="row filtertable-footer">\r\n                <div class="col-md-12" ng-if="!filterTable.Loading && filterTable.HasData">\r\n                    <div class="pull-right">\r\n                        <button class="btn btn-default" style="float: left;" ng-click="filterTable.CurrentPage = 1" ng-disabled="filterTable.BackwardDisabled"><i class="fa fa-fast-backward"></i></button>\r\n                        <button class="btn btn-default" style="float: left;" ng-click="filterTable.CurrentPage = (filterTable.CurrentPage - 1)" ng-disabled="filterTable.BackwardDisabled"><i class="fa fa-step-backward"></i></button>\r\n                        <div style="float: left; text-align: right;">\r\n                            <select ng-model="filterTable.CurrentPage"\r\n                                    ng-options="item as item for item in filterTable.FilterPageArray"></select>\r\n                            {{::Translations.FilterTable_Page}} {{ filterTable.CurrentPage }} {{::Translations.FilterTable_Of}} {{ filterTable.FilterDataPageCount }} ({{filterTable.PassedDataPageCount}} {{::Translations.FilterTable_Total}})\r\n                        </div>\r\n                        <button class="btn btn-default" style="float: right;" ng-click="filterTable.CurrentPage = filterTable.FilterDataPageCount" ng-disabled="filterTable.ForwardDisabled"><i class="fa fa-fast-forward"></i></button>\r\n                        <button class="btn btn-default" style="float: right;" ng-click="filterTable.CurrentPage = (filterTable.CurrentPage + 1)" ng-disabled="filterTable.ForwardDisabled"><i class="fa fa-step-forward"></i></button>\r\n                    </div>\r\n                    <div style="float: left;">\r\n                        {{::Translations.FilterTable_Records}}: {{filterTable.DataFiltered.length}} {{::Translations.FilterTable_Of}} {{filterTable.PassedData.length}}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'),a.put("wwwroot/FilterTable/Views/FilterTableMultiSelect.html",'<div class="modal-header">\r\n    <h3 class="modal-title">Filter {{column.Display}}</h3>\r\n</div>\r\n<div class="modal-body">\r\n    <div class="row">\r\n        <div class="col-md-12">\r\n            <!--<button class="btn btn-default" type="button" ng-click="All()">Alle</button>-->\r\n            <!--/\r\n            <button class="btn btn-default" type="button" ng-click="None()">Keine</button>-->\r\n            <br/>\r\n            <div ng-repeat="item in Distincts">\r\n                <label>\r\n                    <input type="checkbox" ng-model="column.CustomFilter.Selected[item]" />\r\n                    {{item}}\r\n                </label>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<div class="modal-footer">\r\n    <button class="btn btn-default" type="button" ng-click="Reset()">Kein Filter</button>\r\n    <button class="btn btn-primary" type="button" ng-click="ok()">OK</button>\r\n    <button class="btn btn-warning" type="button" ng-click="cancel()">Cancel</button>\r\n</div>\r\n\r\n'),a.put("wwwroot/FilterTable/Views/FilterTableOptions.html",'<div class="modal-header">\r\n    <h3 class="modal-title">Einstellungen</h3>\r\n</div>\r\n<div class="modal-body">\r\n    <uib-tabset>\r\n        <uib-tab heading="Spalten" ng-if="FilterTable.CanSelectCols">\r\n            <table class="table table-bordered table-condensed table-responsive table-striped table-hover">\r\n                <thead>\r\n                    <tr>\r\n                        <th>Name</th>\r\n                        <th>Sichtbar</th>\r\n                        <th>Dropdown</th>\r\n                    </tr>\r\n                    <tr>\r\n                        <td>\r\n                            <input name="theColFilter.Display" ng-model="theColFilter.Display" placeholder="Name" />\r\n                        </td>\r\n                        <td>\r\n                            <input type="checkbox" ng-model="visible.all" ng-change="ChangeVisible(visible.all)" /> Alle\r\n                        </td>\r\n                        <td></td>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr ng-repeat="col in FilterTable.CurrentCols | filter: theColFilter">\r\n                        <td>{{::col.Display}}</td>\r\n                        <td><input type="checkbox" ng-model="col.Visible" /></td>\r\n                        <td ng-switch="FilterTable.NoSearchSelects">\r\n                            <input ng-switch-when="true" type="checkbox" ng-model="noSelect" ng-disabled="true" />\r\n                            <input ng-switch-when="false" type="checkbox" ng-model="col.BuildSelect" ng-disabled="!col.CanBuildSelect" />\r\n                        </td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n        </uib-tab>\r\n        <uib-tab heading="Tabelle" ng-if="true">\r\n            <table class="table table-bordered table-condensed table-responsive table-striped table-hover">\r\n                <thead>\r\n                    <tr>\r\n                        <th>Setting</th>\r\n                        <th>Wert</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr>\r\n                        <td>Suche aktiv</td>\r\n                        <td><input type="checkbox" ng-model="FilterTable.SearchActive" /></td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td>Keine Dropdowns</td>\r\n                        <td><input type="checkbox" ng-model="FilterTable.NoSearchSelects" /></td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td>Dropdowns einschränken</td>\r\n                        <td><input type="checkbox" ng-model="FilterTable.ReduceSelects" /></td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td>Datensätze pro Seite</td>\r\n                        <td><input type="number" ng-model="FilterTable.PageSize" ng-model-options="ModelOptions" /></td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n        </uib-tab>\r\n    </uib-tabset>\r\n</div>\r\n<div class="modal-footer">\r\n    <button class="btn btn-primary" type="button" ng-click="ok()">OK</button>\r\n    <!--<button class="btn btn-warning" type="button" ng-click="cancel()">Cancel</button>-->\r\n</div>\r\n\r\n')}]),function(){"use strict";angular.module("smlAppl.webApps.framework.filterTable.controllers").controller("FilterTableModalInstanceCtrl",function(a,b,c,d){a.Options=d,a.visible={},a.visible.all=a.Options.CurrentCols.length===a.Options.CurrentCols.filter(function(a,b,c){return a.visible}).length,a.theColFilter={},a.ModelOptions={debounce:{"default":500,blur:0}},a.ok=function(){b.close()},a.cancel=function(){b.dismiss("cancel")},a.ChangeVisible=function(b){for(var d=a.Options.CurrentCols.filter(function(a,c,d){return a.visible!==b}),e=c("filter")(d,a.theColFilter),f=0;f<e.length;f++)e[f].visible=b},a.ChangeDropDown=function(b){b.select&&a.Options.buildDistinctsFor(b)}})}(),angular.module("smlAppl.webApps.framework.filterTable.directives").controller("FilterTableModalMultiSelectCtrl",["$scope","$uibModalInstance","$filter","filterTable","column",function(a,b,c,d,e){function f(b){var d=c("orderBy")(a.column.Distincts)||[];if(b)for(var e=d.length,f=e;f>0;f--){var g=d[f-1];null!==g&&void 0!==g&&""!==g.trim()||d.splice(f-1,1)}return d}a.FilterTable=d,a.column=angular.copy(e),a.Distincts=f(!0),a.ModelOptions={debounce:{"default":500,blur:0}},a.Reset=function(){a.column.CustomFilter.FnReset(),b.close(a.column)},a.All=function(){for(var b=0;b<a.Distincts.length;b++){var c=a.Distincts[b];a.column.CustomFilter.Selected[c]=!0}},a.None=function(){a.column.CustomFilter.FnReset()},a.ok=function(){for(var c=Object.keys(a.column.CustomFilter.Selected),d=0;d<c.length;d++){var e=c[d];a.column.CustomFilter.Selected[e]||delete a.column.CustomFilter.Selected[e]}c=Object.keys(a.column.CustomFilter.Selected),0===c.length?a.column.CustomFilter.FnReset():(a.column.CustomFilter.Text=c.length+" gewählt",a.column.CustomFilter.Tooltip=c.join(", ")),b.close(a.column)},a.cancel=function(){b.dismiss("cancel")}}]),function(){"use strict";angular.module("smlAppl.webApps.framework.filterTable.directives").factory("filterTableConstructor",["$filter","$timeout","$parse","$sce",function(a,b,c,d){function e(a,b,c){this.Title=a||"",this._calculator=b||null,this.Values={},this.ShowPageValues=c||!1}function f(){this._key=null,this._ignore=!1,this._visible=!1,this._display=void 0,this.DisplayKey=void 0,this._canBuildSelect=!0,this._buildSelect=!1,this.orderAsc=void 0,this._distincts=null,this._distinctsReduced=null,this.Filter=void 0,this.ValueFunction=null,this.ClickAction=null,this.ActionCol=!1,this.GetFilterTable=function(){return null},this.AlternateSortCol=null,this._calculateColumn=null,this._applyFilter=null,this.CustomFilter=null}function g(a,b,c){var d={enumerable:!0,configurable:!0};Object.defineProperty(Object.getPrototypeOf(a),b,angular.extend(d,c))}function h(){var a=this;a._loading=!0,this._error=!1,g(this,"test1",{get:function(){return"foo"},set:function(a){}}),this._loadTimeout={},this.OptionsProvided=!1,this.StructureSet=!1,this._columns=[],this._data=[],this._dataCalc=[],this._dataCounter=0,this._hasData=!1,this.DataFiltered=[],this.DataDisplayed=[],this._currentPage=1,this._filterPageCount=0,this._currentCols=[],this._visibleCols=[],this.OrderByCols=[],this.Status="Loading",this._actionCol=null,this.HeaderRows=[],this.FooterRows=[],this.Initialised=!1,this.FilterUpdateHandler={_pending:!1,get Pending(){return this._pending},set Pending(c){var d=this;!d._pending&&c&&(d._pending=c,b.cancel(d._delay),this._delay=b(function(){a.UpdateFilter(d.ResetHeaderAndFooter),d._resetHeaderAndFooter=!1,d._pending=!1},200))},_delay:null,_resetHeaderAndFooter:!1,get ResetHeaderAndFooter(){return this._resetHeaderAndFooter},set ResetHeaderAndFooter(a){this._resetHeaderAndFooter=this._resetHeaderAndFooter||a,this.Pending=!0}}}function i(){for(var a=0;a<arguments.length;a++)if(angular.isDefined(arguments[a]))return arguments[a]}function j(a,b){return(a||[]).indexOf(b)>-1?!0:void 0}function k(a,b){var c=b||{};if(Object.getPrototypeOf(a)===f.prototype)return a;var d=new f;d.Key=i(a.key,a.Key,null),d.ActionCol=i(a.actionCol,a.ActionCol,!1),d.ValueFunction=i(a.valueFunction,a.ValueFunction,null),d.ClickAction=i(a.clickAction,a.ClickAction,null),d.Ignore=i(j(c.IgnoreColumns,d.Key),a.ignore,a.Ignore,!1),d.Visible=i(a.visible,a.Visible,!1),d.DisplayKey=i(a.displayKey,a.DisplayKey,a.display,a.Display,d.Key),d.CanBuildSelect=i(c.NoSearchSelects===!0?!1:void 0,j(c.NoSelectsOnColumns,d.Key),a.canSelect,a.CanBuildSelect,!0),d.BuildSelect=i(j(c.SelectsOnColumns,d.Key),a.select,a.BuildSelect,!1),d.orderAsc=i(j(c.Order,d.Key),a.orderAsc,a.orderAsc),d.Filter=i(a.filter,a.Filter),d.AlternateSortCol=i(a.alternateSortCol,a.AlternateSortCol,null),d.CustomFilter=i(a.customFilter,a.CustomFilter,null);var e=i(a.isDate,a.IsDate,!1);if(e&&null===d.AlternateSortCol&&(d.AlternateSortCol=d.Key+"_Order_Col"),null==d.Key)return console.log("invalid item - missing 'key':"),console.log(a),null;if(c=b||null,null!==d.CustomFilter){if(angular.isString(d.CustomFilter)&&"MultiSelect"===d.CustomFilter&&(d.CanBuildSelect=!0,d.BuildSelect=!0,d.CustomFilter={Text:d.Display+" filtern",TemplateUrl:"wwwroot/FilterTable/Views/FilterTableMultiSelect.html",Controller:"FilterTableModalMultiSelectCtrl",Tooltip:"Klicken zum auswählen.",Selected:{},FnFilter:function(a,b){return 0===Object.keys(this.Selected).length?!0:angular.isDefined(this.Selected[a[d.Key]])},FnReset:function(){this.Tooltip="Klicken zum auswählen.",this.Text=d.Display+" filtern",this.Selected={}}}),angular.isUndefined(d.CustomFilter.FnFilter)||!angular.isFunction(d.CustomFilter.FnFilter))return console.log("invalid filter function for customfilter on column '"+d.Key+"'"),console.log(a),null;if(angular.isUndefined(d.CustomFilter.FnReset)||!angular.isFunction(d.CustomFilter.FnReset))return console.log("invalid reset function for customfilter on column '"+d.Key+"'"),console.log(a),null;if(angular.isUndefined(d.CustomFilter.TemplateUrl)||null==d.CustomFilter.TemplateUrl||""===d.CustomFilter.TemplateUrl.trim())return console.log("invalid TemplateUrl for customfilter on column '"+d.Key+"'"),console.log(a),null;if(angular.isUndefined(d.CustomFilter.Controller)||null==d.CustomFilter.Controller||""===d.CustomFilter.Controller.trim())return console.log("invalid Controller for customfilter on column '"+d.Key+"'"),console.log(a),null}return d.GetFilterTable=function(){return c},angular.isDefined(d.orderAsc)&&null!==c&&c.AddOrderBy(d,!1),d}return e.prototype={get CanCalculate(){return null!=(this._calculator||null)},GetValue:function(a){if(angular.isUndefined(this.Values[a.Key])){var b=this.Calculate(a);null!==(b||null)&&angular.isString(b)&&(b=d.trustAsHtml(b)),this.Values[a.Key]=b}return this.Values[a.Key]||null},ResetVal:function(a){a=a||!1,a&&!this.ShowPageValues||(this.Values={})},ColumnData:function(a,b){return(b||[]).map(function(b){return b[a.Key]})},Sum:function(a,b){var c=0,d=this.ColumnData(a,b),e=d.length;if(0===e)return null;for(var f=e;f>0;f--)c+=d[f-1];return c},Avg:function(a,b){var c=b.length;return 0===c?null:this.Sum(a,b)/c},Max:function(a,b){var c=this.ColumnData(a,b),d=c.length;return 0===d?null:Math.max.apply(null,c)},Min:function(a,b){var c=this.ColumnData(a,b),d=c.length;return 0===d?null:Math.min.apply(null,c)},Calculate:function(a){if(this.CanCalculate){var b=a.GetFilterTable().DataFiltered||[],c=a.GetFilterTable().DataDisplayed||[];return this._calculator.call(this,a,b,c)}return null}},f.prototype={get Key(){return this._key},set Key(a){null!==(a||null)&&(this._key=a)},get Display(){return angular.isUndefined(this._display)&&(this._display=c("(col.DisplayKey || col.Key) | translate")(this,{col:this})),angular.isDefined(this._display)&&angular.isString(this._display)&&(this._display=d.trustAsHtml(this._display)),this._display},set Display(a){this._display=a},ResetDisplay:function(){this._display=void 0},CallOnFilterTable:function(a){var b={called:!1,result:void 0},c=this.GetFilterTable();return null!=c&&(b.called=!0,b.result=a.call(c,c,this)),b},_updateColumns:function(a){a.UpdateColumnLists(a.Columns)},UpdateColumns:function(){this.CallOnFilterTable(this._updateColumns)},get Visible(){return this.Ignore?!1:this._visible},set Visible(a){angular.isUndefined(a)||null===a||(this._ignore?this._visible=!1:this._visible=a,this.UpdateColumns())},get Ignore(){return this._ignore},set Ignore(a){angular.isUndefined(a)||null===a||(this._ignore=a,this._ignore&&(this._visible=!1),this.UpdateColumns())},get BuildSelect(){return this.CanBuildSelect?this._buildSelect:!1},set BuildSelect(a){if(!angular.isUndefined(a)&&null!==a){var b=this._buildSelect;this.CanBuildSelect?this._buildSelect=a:this._buildSelect=!1,this._buildSelect!==b&&this.ResetDistincts()}},ResetDistincts:function(a){a=angular.isUndefined(a)?!0:a,a&&(this._distincts=null),this._distinctsReduced=null},_buildDistincts:function(a,b,c,d){return a.CreateDistincts(b,c,d)},BuildDistincts:function(a,b){var c=this,d=this.CallOnFilterTable(function(d,e){return c._buildDistincts(d,e,a,b)});return d.called?d.result:{All:null,Reduced:null}},get DistinctHolder(){if(this.BuildSelect){var a=this.BuildDistincts(null==this._distincts,null==this._distinctsReduced);null==this._distincts&&(this._distincts=a.All),null==this._distinctsReduced&&(this._distinctsReduced=a.Reduced)}return{All:this._distincts,Reduced:this._distinctsReduced}},GetDistincts:function(a){return(a||!1)===!0?this.DistinctsReduced:this.Distincts},get Distincts(){return this.DistinctHolder.All},get DistinctsReduced(){return this.DistinctHolder.Reduced},get HasDistincts(){return(this.Distincts||[]).length>0},_canBuildFromTable:function(a){return a.NoSearchSelects},get CanBuildFromTable(){var a=this.CallOnFilterTable(this._canBuildFromTable);return a.called?!a.result:!0},get CanBuildSelect(){return this.CanBuildFromTable&&this._canBuildSelect},set CanBuildSelect(a){angular.isUndefined(a)||null===a||(this._canBuildSelect=a,this._canBuildSelect||(this._buildSelect=!1))},get OrderBy(){if(angular.isDefined(this.orderAsc)){var a=null!==(this.AlternateSortCol||null)?this.AlternateSortCol:this.Key;return(this.orderAsc===!0?"":"-")+"'"+a+"'"}return null},get IsSorted(){return angular.isDefined(this.orderAsc)},get OrderIndicator(){return this.IsSorted?this.orderAsc?"glyphicon glyphicon-sort-by-alphabet":"glyphicon glyphicon-sort-by-alphabet-alt":"glyphicon glyphicon-sort"},get CalculateColumn(){return null==this._calculateColumn&&(this._calculateColumn=angular.isDefined(this.ValueFunction)&&angular.isFunction(this.ValueFunction)&&null!==this.ValueFunction),this._calculateColumn},get ApplyFilter(){return null==this._applyFilter&&(this._applyFilter=angular.isDefined(this.Filter)),this._applyFilter},get HasCustomFilter(){return null!==this.CustomFilter},get FilterType(){return this.HasCustomFilter?angular.isDefined(this.CustomFilter.InputHtml)?"CustomHtml":"Custom":this.HasDistincts?"Select":"Input"},TrustIt:function(a){return null!==(a||null)&&angular.isString(a)?d.trustAsHtml(a):a},GetValue:function(a){return this.CalculateColumn?this.TrustIt(this.ValueFunction.call(this,a)):this.ActionCol?"":this.ApplyFilter?this.TrustIt(c("item[col.Key] | "+this.Filter)(this,{item:a,col:this})):this.TrustIt(a[this.Key])},get HasClickAction(){return angular.isDefined(this.ClickAction)&&angular.isFunction(this.ClickAction)&&null!==this.ClickAction},Clicked:function(a){this.HasClickAction&&this.ClickAction.call(this,a,this)}},h.prototype={CreateDistincts:function(b,c,d){var e={All:null,Reduced:null};if(b.BuildSelect){var f=function(c){for(var d=(c||[]).map(function(a){return a[b.Key]}),e={},f=[""],g=0;g<d.length;g++){var h=d[g]||null;null!==h&&angular.isUndefined(e[h])&&(e[h]="",f.push(h.toString()))}return f=a("orderBy")(f)};c&&(e.All=f(this.PassedData)),d&&(e.Reduced=f(this.DataFiltered))}return e},get PassedData(){return this._dataCalc},RecalculateData:function(){this.UpdateData(this._data,!1)},set PassedData(a){this.UpdateData(a,!1)},UpdateData:function(a,c){c=c||!1;var d=this;if(c)d._dataCalc=this.GetOrdered(d._dataCalc),d.ResetHeaders(!0),d.ResetFooters(!0);else{d._data=a,d.CheckColumnsDefs(d._data);for(var e=[],f=this.Columns.filter(function(a,b,c){return!a.Ignore}),g=0;g<d._data.length;g++){for(var h=d._data[g],i={},j=0;j<f.length;j++){var k=f[j],l=h[k.Key];i[k.Key]=k.GetValue(h),null!==k.AlternateSortCol&&(h.hasOwnProperty(k.AlternateSortCol)?i[k.AlternateSortCol]=h[k.AlternateSortCol]:i[k.AlternateSortCol]=l)}e.push(i)}d._dataCalc=this.GetOrdered(e),d.ResetDistincts(!0)}d._hasData=d._dataCalc.length>0,d.FilterUpdateHandler.ResetHeaderAndFooter=!c,b.cancel(d._loadTimeout),d._hasData?d.Loading=!1:d._loadTimeout=b(function(){d.Loading=!1,d.Error=!d._hasData&&!d.InitialEmpty&&!d.OptionsProvided},1e4)},ResetHeaders:function(a){for(var b=0;b<this.HeaderRows.length;b++)this.HeaderRows[b].ResetVal(a)},ResetFooters:function(a){for(var b=0;b<this.FooterRows.length;b++)this.FooterRows[b].ResetVal(a)},GetOrdered:function(b){return a("orderBy")(b,this.OrderBy)},get CurrentPage(){return this._currentPage},set CurrentPage(a){this._currentPage=a,this.UpdateDisplayData()},get PageSizeCalc(){return angular.isDefined(this.PageSize)&&angular.isNumber(this.PageSize)?Math.ceil(this.PageSize,1):10},UpdateDisplayData:function(){var a=(this.CurrentPage-1)*this.PageSizeCalc;a>this.DataFiltered.length?this.DataDisplayed=[]:this.DataDisplayed=this.DataFiltered.slice(a,a+this.PageSizeCalc),this.ResetHeaders(!0),this.ResetFooters(!0)},get BackwardDisabled(){return this.CurrentPage<=1},get PassedDataPageCount(){return Math.ceil(this.PassedData.length/this.PageSizeCalc)},get FilterDataPageCount(){return Math.ceil(this.DataFiltered.length/this.PageSizeCalc)},get FilterPageArray(){for(var a=[],b=1;b<=this.FilterDataPageCount;b++)a.push(b);return a},get ForwardDisabled(){return this.CurrentPage>=this.FilterDataPageCount},get HasData(){return this._hasData},get ShowNoDataMsg(){return!this.Loading&&!this.HasData&&!this.InitialEmpty},get ShowDataFilteredOutMsg(){return!this.Loading&&this.HasData&&0===this.DataFiltered.length},get OrderBy(){for(var a=[],b=0;b<this.OrderByCols.length;b++){var c=this.OrderByCols[b],d=c.OrderBy;null!=d&&a.push(d)}return a},set OrderBy(a){if(null===(a||null))this.ClearOrderBy(),this.UpdateData(this.PassedData,!0);else if(Object.getPrototypeOf(a)===f.prototype){var b=!a.orderAsc;this.ClearOrderBy(),a.orderAsc=b,this.AddOrderBy(a)}},UpdateOrderBy:function(a,b){var c=!b.ctrlKey||0===this.OrderByCols.length||null===(a||null)||0===this.OrderByCols.length||Object.getPrototypeOf(a)!==f.prototype;if(c)this.OrderBy=a;else{var d=!a.orderAsc;a.orderAsc=d,this.AddOrderBy(a)}},AddOrderBy:function(a,b){var c=this.OrderByCols.filter(function(b,c,d){return b.Key===a.Key});0===c.length&&this.OrderByCols.push(a),(angular.isUndefined(b)||b===!0)&&this.UpdateData(this.PassedData,!0)},ClearOrderBy:function(){for(var a=0;a<this.OrderByCols.length;a++)this.OrderByCols[a].orderAsc=void 0;this.OrderByCols.length=0},ColByKey:function(a){var b=this.Columns.filter(function(b,c,d){return b.Key===a});return 1===b.length?b[0]:null},CheckColumnsDefs:function(a){if(!this.OptionsProvided){this.StructureSet=!1;var b=a||[],c=[];if(b.length>0){var d=b[0];for(var e in d)d.hasOwnProperty(e)&&"$$hashKey"!==e&&c.push({Key:e});c.length>0&&(this.Columns=this.UpdateColumnsDefs(c))}}return a},UpdateColumnsDefs:function(a){for(var b=a||[],c=[],d=!1,e=0;e<b.length;e++){var f=b[e],g=this.ColByKey(f.Key),h=null==g?k(f,this):g;d=d||g!==h,null!==h&&c.push(h)}return d=d||b.length!==c.length||c.length!==this.Columns.length,this.StructureSet=c.length>0,d||(c=this.Columns),this.UpdateColumnLists(c),this.UpdateStatus(),c},UpdateColumnLists:function(a){this._currentCols=a.filter(function(a,b,c){return!a.Ignore&&!a.ActionCol}),this._visibleCols=this._currentCols.filter(function(a,b,c){return a.Visible}),this.InitFilter()},get CurrentCols(){return this._currentCols;
},get VisibleCols(){return this._visibleCols},ChangeColValue:function(a,b,c){for(var d=angular.isDefined(a)?angular.isArray(a)?a:[a]:[],e=0;e<d.length;e++){var f=this.ColByKey(d[e])||null;null!==f&&(f[b]=c)}},get Loading(){return this._loading},set Loading(a){this._loading=a,this.UpdateStatus()},set Error(a){this._error=a,this.UpdateStatus()},UpdateStatus:function(){return this._error?void(this.Status="Error"):this.StructureSet?void(this.Status="Structure"):this._loading?void(this.Status="Loading"):void(this.Status="undefined")},InitFilter:function(){function a(a){Object.defineProperty(d,a,{get:function(){return d.backingfields[a]},set:function(c){var e=d.backingfields[a]!==c;d.backingfields[a]=c,b.FilterUpdateHandler.ResetHeaderAndFooter=e}})}for(var b=this,c=b.TableFilter,d={backingfields:{}},e=this.CurrentCols.filter(function(a){return!a.HasCustomFilter}),f=0;f<e.length;f++){var g=e[f],h=c[g.Key],i=g.Key;a(i),d.backingfields[i]=h}this.TableFilter=d},ClearFilter:function(){for(var a=0;a<this.VisibleCols.length;a++){var b=this.VisibleCols[a];this.ResetFilter(b)}},ResetFilter:function(a){a.HasCustomFilter?angular.isDefined(a.CustomFilter.FnReset)&&angular.isFunction(a.CustomFilter.FnReset)&&(a.CustomFilter.FnReset.call(a.CustomFilter,a),this.FilterUpdateHandler.ResetHeaderAndFooter=!0):this.TableFilter[a.Key]=null},CleanTableFilter:function(a){var b=angular.copy(a||{});for(var c in b)b.hasOwnProperty(c)&&(null!==(b[c]||null)&&""!==b[c]||delete b[c]);return b},UpdateFilter:function(b){for(var c=a("filter")(this._dataCalc,this.CleanTableFilter(this.TableFilter.backingfields)),d=this.CurrentCols.filter(function(a){return a.HasCustomFilter}),e=0;e<d.length;e++){var f=d[e];try{var g=c.filter(function(a){return f.CustomFilter.FnFilter.call(f.CustomFilter,a,f)});c=g}catch(h){console.log("Filter didn't compute.")}}this.DataFiltered=c,this.ResetDistincts(this.ReduceSelects),this.CurrentPage=1,b&&(this.ResetHeaders(),this.ResetFooters())},ResetDistincts:function(a){if(a)for(var b=0;b<this.Columns.length;b++){var c=this.Columns[b];Object.getPrototypeOf(c)===f.prototype&&c.ResetDistincts(!0)}},get ActionCol(){if(null==this._actionCol){var a=this.Columns.filter(function(a,b,c){return a.ActionCol});1===a.length?this._actionCol=a[0]:this._actionCol=k({Key:"theEmptyActionCol",ValueFunction:function(a){return""}})}return this._actionCol},set ActionCol(a){this._actionCol=a},ExecuteClickAction:function(a,b){a.HasClickAction&&a.Clicked(b)},Refresh:function(){var a=this;a.Loading=!0;for(var c=0;c<a.Columns.length;c++){var d=a.Columns[c];d.ResetDisplay()}var e=a.Columns;a._currentCols=[],a._visibleCols=[],b(function(){a.UpdateColumnLists(e),a.RecalculateData()})}},{FilterTable:h,HeaderDef:e,GetDefined:i}}]).directive("filterTable",["$rootScope","$uibModal","$timeout","$filter","$sanitize","filterTableConstructor","$translate",function(a,b,c,d,e,f,g){return{restrict:"E",scope:{inData:"=items",inOptions:"=?options",inColumns:"=?columns",inCanCustomize:"=?canCustomize",inCanSelectCols:"=?canSelectCols",inSearchActive:"=?searchActive",inNoSearchSelects:"=?noSearchSelects",inReduceSelects:"=?reduceSelects",inOrder:"=?order",inPageSize:"=?pageSize",inSelectsOnColumns:"=?selectsOnColumns",inNoSelectsOnColumns:"=?noSelectsOnColumns",inIgnoreColumns:"=?ignoreColumns",inInitialEmpty:"=?initialEmpty"},templateUrl:"wwwroot/FilterTable/Views/FilterTable.html",link:function(c,d,e){function h(a,b,d){function e(a,b,c){return c=c||0,null===(a||null)?{scope:null,lvl:c}:a.hasOwnProperty(b)?{scope:a,lvl:c}:e(a.$parent,b,c+1)}var f=angular.isDefined(d.value)?d.value:null,g=f;d.force!==!0&&(angular.isDefined(c["in"+b])?g=c["in"+b]:angular.isDefined(c.inOptions)&&angular.isDefined(c.inOptions[b])&&(g=c.inOptions[b])),angular.isUndefined(a.backingFields)&&(a.backingFields={}),angular.isUndefined(a.watchers)&&(a.watchers={}),angular.isUndefined(a.backingFields[b])&&(a.backingFields[b]=g),Object.defineProperty(a,b,{get:function(){return a.backingFields[b]},set:function(e){var f=angular.isDefined(d.changeFunc)?d.changeFunc.call(d.callOn||a,e):e;if(!angular.equals(a.backingFields[b],f)){var g=a.backingFields[b];a.backingFields[b]=f,angular.isDefined(d.afterChangeFunc)&&d.afterChangeFunc.call(d.callOn||a,e,g)}angular.isObject(f)&&angular.isDefined(d.afterChangeFunc)&&angular.isUndefined(a.watchers[b])&&(a.watchers[b]=c.$watch(function(){return a.backingFields[b]},function(b,c){d.afterChangeFunc.call(d.callOn||a,b,c)},!0)),d.syncOut&&(angular.equals(c["in"+b],f)||(c["in"+b]=f),angular.isDefined(c.inOptions)&&(angular.equals(c.inOptions[b],f)||(c.inOptions[b]=f)))},enumerable:!0,configurable:!0}),angular.isDefined(c.inOptions)&&Object.defineProperty(c.inOptions,b,{get:function(){return a[b]},set:function(c){a[b]=c},enumerable:!0,configurable:!0});e(c,"allInfos");(angular.isDefined(c["in"+b])||d.force===!0)&&Object.defineProperty(c,"in"+b,{get:function(){return a[b]},set:function(c){a[b]=c},enumerable:!0,configurable:!0}),a[b]=a[b]}function i(a){for(var b in a)a.hasOwnProperty(b)&&h(c.filterTable,b,a[b])}function j(a){return angular.isDefined(a)&&angular.isNumber(a)&&a>0?a:c.filterTable.PageSize}function k(a){for(var b=a||[],c=[],d=0;d<b.length;d++){var e=b[d],g=new f.HeaderDef(f.GetDefined(e.title,e.Title,""),f.GetDefined(e.calculate,e.Calculate,null),f.GetDefined(e.showPageValues,e.ShowPageValues,!1));g.CanCalculate&&c.push(g)}return c}function l(){var a={CanCustomize:{syncIn:!0,syncOut:!0,value:!0},CanSelectCols:{syncIn:!0,syncOut:!0,value:!0},SearchActive:{syncIn:!0,syncOut:!0,value:!0},NoSearchSelects:{syncIn:!0,syncOut:!0,value:!1,afterChangeFunc:function(a){a&&c.filterTable.ResetDistincts(!0)}},ReduceSelects:{syncIn:!0,syncOut:!0,value:!1,afterChangeFunc:function(){c.filterTable.ResetDistincts(!0)}},Order:{syncIn:!0,syncOut:!0,value:[],changeFunc:function(a){return angular.isDefined(a)?angular.isArray(a)?a:[a]:[]}},PageSize:{syncIn:!0,syncOut:!0,value:15,changeFunc:j,afterChangeFunc:function(){c.filterTable.CurrentPage=1}},SelectsOnColumns:{syncIn:!0,syncOut:!0,value:[]},NoSelectsOnColumns:{syncIn:!0,syncOut:!0,value:[]},IgnoreColumns:{syncIn:!0,syncOut:!0,value:[]},TableFilter:{syncIn:!0,syncOut:!0,value:{}},InitialEmpty:{syncIn:!0,syncOut:!0,value:!1},Columns:{syncIn:!0,syncOut:!0,value:[],changeFunc:c.filterTable.UpdateColumnsDefs},HeaderRows:{syncIn:!0,syncOut:!0,value:[],changeFunc:k},FooterRows:{syncIn:!0,syncOut:!0,value:[],changeFunc:k},Data:{syncIn:!0,syncOut:!1,value:[],afterChangeFunc:function(a){c.filterTable.PassedData=a}}};i(a),c.filterTable.OptionsProvided=c.filterTable.Columns.length>0,c.filterTable.Initialised=!0}function m(){var a=[];for(var b in c.Translations.fallback)c.Translations.fallback.hasOwnProperty(b)&&a.push(b);g(a).then(function(b){for(var d=0;d<a.length;d++){var e=a[d],f=e===b[e];f?c.Translations[e]=c.Translations.fallback[e]:c.Translations[e]=b[e]}})}c.ModelOptions={debounce:{"default":500,blur:0}},c.filterTable=new f.FilterTable,l(),a.$on("$translateChangeEnd",function(){m(),c.filterTable.Refresh()}),c.Translations={fallback:{FilterTable_Error_Getting_Data:"Fehler beim Beziehen der Daten.",FilterTable_Error_No_Data:"Keine Daten gefunden.",FilterTable_Error_Filter_No_Data:"Filter enthält keine Daten.",FilterTable_Page:"Seite",FilterTable_Of:"von",FilterTable_Total:"Total",FilterTable_Records:"Datensätze"}},m(),c.animationsEnabled=!0,c.open=function(a){c.openThis(a,"wwwroot/FilterTable/Views/FilterTableOptions.html","FilterTableOptionsCtrl")},c.defineFilter=function(a){c.openThis(void 0,a.CustomFilter.TemplateUrl,a.CustomFilter.Controller,a,void 0,function(b){a.CustomFilter=b.CustomFilter,c.filterTable.FilterUpdateHandler.ResetHeaderAndFooter=!1})},c.openThis=function(a,d,e,f,g,h){f=f||null,g=g||function(){},h=h||function(){};var i=b.open({animation:c.animationsEnabled,templateUrl:d,controller:e,size:a,resolve:{filterTable:function(){return c.filterTable},column:f}});i.result.then(function(a){h(a)},function(){g()})}}}}])}(),function(){"use strict";angular.module("smlAppl.webApps.framework.filterTable.directives").controller("FilterTableOptionsCtrl",["$scope","$uibModalInstance","$filter","filterTable",function(a,b,c,d){function e(){var b=c("filter")(a.FilterTable.CurrentCols,a.theColFilter),d=b.length===b.filter(function(a,b,c){return a.Visible}).length,e=b.length===b.filter(function(a,b,c){return!a.Visible}).length;a.visible.all=d?!0:e?!1:void 0}a.FilterTable=d,a.visible={},a.theColFilter={},a.visible.all=void 0,a.noSelect=!1,a.$watch("theColFilter",function(a,b){e()},!0),a.$watch("FilterTable.CurrentCols",function(a,b){e()},!0),a.ModelOptions={debounce:{"default":500,blur:0}},a.ok=function(){b.close()},a.cancel=function(){b.dismiss("cancel")},a.ChangeVisible=function(b){for(var d=a.FilterTable.CurrentCols.filter(function(a,c,d){return a.Visible!==b}),f=c("filter")(d,a.theColFilter),g=0;g<f.length;g++)f[g].Visible=b;e()}}])}(),function(){"use strict";angular.module("smlAppl.webApps.framework.filters").filter("chDate",["$filter",function(a){var b=a("date");return function(a){return b(a,"dd.MM.yyyy")}}]).filter("chDateTime",["$filter",function(a){var b=a("date");return function(a){return b(a,"dd.MM.yyyy HH:mm:ss")}}])}(),function(){"use strict";angular.module("smlAppl.webApps.framework.filters").filter("decimal",["$filter",function(a){var b=a("number");return function(a,c){return c&&angular.isNumber(c)||(c=0),b(a,c)}}])}(),function(){"use strict";angular.module("smlAppl.webApps.framework.services").service("Employee",["$http","appConfigFw","HttpHandler",function(a,b,c){var d=b.uriFwBaseApi+"Employees/";this.getAll=function(){var b=a.get(d);return b.then(c.handleSuccess,c.handleGetErrorWithNotify)},this.getById=function(b){var e=a.get(d+b);return e.then(c.handleSuccess,c.handleGetErrorWithNotify)},this.getByFilter=function(b){var e={filter:b},f=a.get(d+"GetByFilter",{params:e});return f.then(c.handleSuccess,c.handleGetErrorWithNotify)}}])}(),function(){"use strict";angular.module("smlAppl.webApps.framework.services").service("HttpHandler",["$q","Notify",function(a,b){var c=this;this.handleError=function(b){return console.log(b),angular.isObject(b.data)||b.statusText||(b.statusText="An unknown error occurred."),a.reject(b)},this.handleGetErrorWithNotify=function(d){var e=c.handleError(d);return b.alertGetError(e),a.reject(e)},this.handleSaveErrorWithNotify=function(d){var e=c.handleError(d);return b.alertSaveError(e),a.reject(e)},this.handleSuccess=function(a){return a.data}}])}(),function(){"use strict";angular.module("smlAppl.webApps.framework.services").service("Notify",["ngNotify","$filter",function(a,b){function c(a){d(a,"error")}function d(c,d){c=b("translate")(c),a.set(c,d)}this.alertInfo=function(a){d(a,"info")},this.alertSuccess=function(a){d(a,"success")},this.alertError=function(a){c(a)},this.alertSaveSuccess=function(){d("Msg_Save_Successful","success")},this.alertSaveError=function(a){var b=a.statusText;b||(b="Message_Save_Error"),c(b)},this.alertGetError=function(a){var b=a.statusText;b||(b="Message_DataGet_Error"),c(b)}}])}();